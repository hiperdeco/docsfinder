<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="TemplateAdmin.xhtml">

	<ui:define name="content">
	   <h:form id="frm" action="Configuration.xhtml">
			<p:growl id="msgReturn" for="msgReturn" showSummary="true"
				showDetail="true" />
			
			<h:panelGrid id="pnlEdit" columns="3">

				<p:outputLabel for="id" value="#{userbundle['id.label']}:" rendered="#{UserMB.editing}"/>
				<h:outputText id="id" value="#{UserMB.object.id}"  rendered="#{UserMB.editing}" />
				<p:message for="id" showSummary="false"  rendered="#{UserMB.editing}" />

				<p:outputLabel for="name" value="#{userbundle['name.label']}:" />
				<p:inputText id="name" required="true"
					requiredMessage="#{userbundle['name.requiredMessage']}"
					value="#{UserMB.object.name}" disabled="#{UserMB.editing}"  />
				<p:message for="name" />	
						
				<p:outputLabel for="user" value="#{userbundle['username.label']}:" />
				<p:inputText id="user" required="false" 
					value="#{UserMB.object.userName}" />
				<p:message for="user" />
				
				<p:outputLabel for="password" value="#{userbundle['password.label']}:"/>
				<p:inputText type="password" id="password" required="true"
					value="#{UserMB.object.password}"  />
				<p:message for="password"/>
				
				<p:outputLabel for="role" value="#{userbundle['role.label']}:" />
				<p:selectOneMenu id="role" required="true" requiredMessage="#{userbundle['role.requiredMessage']}"
					value="#{UserMB.object.role}">
					<f:selectItem noSelectionOption="true"/>
				  <f:selectItems value="#{UserMB.roleList}" />
				</p:selectOneMenu>
				<p:message for="role" />	
					

			</h:panelGrid>
			<p:commandButton id="insert" value="#{userbundle['insert.button']}" disabled="#{UserMB.editing}"
				update="frm list" action="#{UserMB.create}" />
			<p:commandButton id="update" value="#{userbundle['update.button']}" disabled="#{!UserMB.editing}"
				update="frm list" action="#{UserMB.update}" />
				
			<p:commandButton id="clear" value="#{userbundle['clear.button']}" immediate="true" process="@this"
				update="frm" action="#{UserMB.clear}" />		

		</h:form>
		
		<p:dataTable id="list" value="#{UserMB.list}" var="item"
			scrollHeight="250" scrollable="true" selectionMode="single"
			rowKey="#{item.id}">
			<f:facet name="header">
				<h:outputText value="#{userbundle['list.title']}" />
			</f:facet>
			<p:ajax event="rowSelect" listener="#{UserMB.onRowSelect}"
				update=":frm" />
			<p:ajax event="rowUnselect" listener="#{UserMB.onRowUnSelect}"
				update=":frm" />
			<p:column headerText="#{userbundle['id.label']}">
				<h:outputText value="#{item.id}"></h:outputText>
			</p:column>
			<p:column headerText="#{userbundle['name.label']}">
				<h:outputText value="#{item.name}"></h:outputText>
			</p:column>
			<p:column headerText="#{userbundle['username.label']}">
				<h:outputText value="#{item.userName}"></h:outputText>
			</p:column>
			<p:column headerText="#{userbundle['role.label']}">
				<h:outputText value="#{item.role}"></h:outputText>
			</p:column>
			<p:column headerText="#{userbundle['action.label']}">
				<p:commandButton action="#{UserMB.delete(item)}" 
				immediate="true" process="@this" value="X" update="frm list"/>
			</p:column>
			<f:facet name="footer">
				<h:outputText value="#{userbundle['rows.label']}: #{UserMB.listSize}" />
			</f:facet>
		</p:dataTable>
	   
	</ui:define>

</ui:composition>
</html>
